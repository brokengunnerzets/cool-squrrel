(function(e){function t(t){for(var o,s,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)s=i[l],n[s]&&d.push(n[s][0]),n[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);m&&m(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,i=1;i<r.length;i++){var u=r[i];0!==n[u]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},n={app:0},a=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var m=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var o=r("c21b"),n=r.n(o);n.a},"162d":function(e,t,r){},"4e9c":function(e,t,r){"use strict";var o=r("162d"),n=r.n(o);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var o=r("2b0e"),n=r("2f62"),a=r("9f7b"),s=(r("2dd8"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-fluid d-flex justify-content-center align-items-center flex-column",style:{backgroundColor:e.color},attrs:{id:"app"}},[e.room||e.isGameMasterMode?e._e():r("Login",{attrs:{color:e.color},on:{roomConnected:function(t){return e.setUpRoom(t)}}}),e.room&&!e.isGameMasterMode&&e.socketRef?r("PLobby",{attrs:{color:e.color,socket:e.socketRef}}):e._e(),!e.room&&e.isGameMasterMode?r("GMLogin",{attrs:{color:e.color},on:{roomConnected:function(t){return e.setUpRoom(t)}}}):e._e(),e.room&&e.isGameMasterMode&&e.socketRef?r("GMLobby",{attrs:{color:e.color,socket:e.socketRef}}):e._e(),e.room?e._e():r("div",[r("button",{staticClass:"btn",on:{click:e.toggleMode}},[e._v(e._s(e.toggleText))])])],1)}),i=[],u=r("fd9b"),c=r.n(u),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-box shadow p-3 mb-5 bg-white rounded"},[r("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.showAlert},on:{dismissed:function(t){e.showAlert=!1}}},[e._v("\n    "+e._s(e.errorText)+"\n  ")]),r("h1",[e._v("Join a Game")]),r("form",{on:{submit:function(e){e.preventDefault()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputUsername"}},[e._v("Username")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"inputUsername","aria-describedby":"username",placeholder:"Enter username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),r("small",{staticClass:"form-text text-muted"},[e._v("This will be your identity in the game.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Room")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.roomName,expression:"roomName"}],staticClass:"form-control",attrs:{type:"text",id:"inputRoom","aria-describedby":"room",placeholder:"Enter room code"},domProps:{value:e.roomName},on:{input:function(t){t.target.composing||(e.roomName=t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("Ask the game master for the game code.")])]),r("b-form-group",{attrs:{label:"Radios using sub-components"}},[r("b-form-radio-group",{attrs:{id:"",name:"radioSubComponent"},model:{value:e.team,callback:function(t){e.team=t},expression:"team"}},[r("b-form-radio",{attrs:{value:"1"}},[e._v("Team 1")]),r("b-form-radio",{attrs:{value:"2"}},[e._v("Team 2")])],1)],1),r("button",{staticClass:"btn",style:{backgroundColor:e.color},on:{click:e.connect}},[e._v("Join")])],1)],1)},l=[],d=(r("96cf"),r("3040")),f=r("bc3a"),p=r.n(f),h={name:"Login",props:{color:String},data:function(){return{username:"",roomName:"",team:1,errorText:"",showAlert:!1}},methods:{connect:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,r,o,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.username&&this.roomName){e.next=3;break}return this.toggleAlert("Username and room required"),e.abrupt("return");case 3:return e.next=5,p.a.get("/rooms/".concat(this.roomName));case 5:if(t=e.sent,r=t.data,r.isValid){e.next=10;break}return this.toggleAlert("Room doesn't exists"),e.abrupt("return");case 10:return e.next=12,p.a.get("/users/".concat(this.username));case 12:if(o=e.sent,n=o.data,n.isValid){e.next=17;break}return this.toggleAlert("Username is not available."),e.abrupt("return");case 17:a=io("/".concat(this.roomName)),a.emit("userConnect",{username:this.username,team:this.team}),this.$emit("roomConnected",a),this.$store.dispatch("setCurrentRoom",this.roomName),this.$store.dispatch("setUsername",this.username),this.$store.dispatch("setTeam","team".concat(this.team));case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),toggleAlert:function(e){var t=this;this.errorText=e,this.showAlert=!0,setTimeout(function(){t.showAlert=!1},2e3)}}},b=h,v=(r("f5a4"),r("2877")),g=Object(v["a"])(b,m,l,!1,null,"56131332",null);g.options.__file="Login.vue";var _=g.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-box shadow p-3 mb-5 bg-white rounded"},[r("h1",[e._v(e._s(e.username)+" - "+e._s(e.team))]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 play-controller"},[r("h3",[e._v(e._s(e.subtitle)+" "+e._s(e.counter))]),e.waitingForBuzz?r("button",{staticClass:"btn boutane",style:{backgroundColor:e.color},on:{click:function(t){e.buzz()}}},[e._v("BUZZ")]):e._e()])])])},w=[],x=r("2ef0"),k=r.n(x),z={name:"LobbyP",props:{socket:Object,color:String},data:function(){return{currentRound:1,waitingForBuzz:!1,counter:""}},computed:{room:function(){return this.$store.getters.currentRoom},team:function(){return this.$store.getters.team},username:function(){return this.$store.getters.username},subtitle:function(){return this.waitingForBuzz?"BE QUICK":"Get ready"}},methods:{buzz:function(){this.socket.emit("player_buzz")}},created:function(){var e=this;this.socket&&(this.socket.on("game_waitForBuzz",function(){e.waitingForBuzz=!0,e.counter=""}),this.socket.on("player_stopWaiting",function(){e.waitingForBuzz=!1,e.counter=""}),this.socket.on("game_roundEnd",function(){e.currentRound=e.currentRound+=1,e.waitingForBuzz=!1,e.counter=""}),this.socket.on("game_offerCounter",function(t){e.team!==t&&(e.waitingForBuzz=!0,e.counter="COUNTER")}))}},C=z,R=(r("73d3"),Object(v["a"])(C,y,w,!1,null,"01f5a442",null));R.options.__file="GameLobby.vue";var M=R.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-box shadow p-3 mb-5 bg-white rounded"},[r("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.showAlert},on:{dismissed:function(t){e.showAlert=!1}}},[e._v("\n    "+e._s(e.errorText)+"\n  ")]),r("h1",[e._v("Create a Game")]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputUsername"}},[e._v("Username")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"inputUsername","aria-describedby":"username",placeholder:"Enter username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),r("small",{staticClass:"form-text text-muted"},[e._v("This will be your identity as the gamemaster.")])]),r("button",{staticClass:"btn",style:{backgroundColor:e.color},on:{click:e.createRoom}},[e._v("Create")])],1)},S=[],E={name:"LoginGameMaster",props:{color:String},data:function(){return{username:"",showAlert:!1,errorText:"Something wrong happened"}},methods:{createRoom:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.username){e.next=5;break}return this.errorText="Username required",this.showAlert=!0,e.abrupt("return");case 5:return e.next=7,p.a.get("/newRoom");case 7:t=e.sent,r=t.data,o=io("/".concat(r.roomName)),o.emit("gameMasterConnect",this.username),this.$emit("roomConnected",o),this.$store.dispatch("setCurrentRoom",r.roomName),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),this.errorText=e.t0.message,this.showAlert=!0;case 19:case"end":return e.stop()}},e,this,[[0,15]])}));return function(){return e.apply(this,arguments)}}()}},O=E,B=(r("8317"),Object(v["a"])(O,T,S,!1,null,"725a7692",null));B.options.__file="LoginGameMaster.vue";var G=B.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-box shadow p-3 mb-5 bg-white rounded"},[r("h1",[e._v("Room: "+e._s(e.room))]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 col-md-8 play-controller"},[r("h2",[e._v("Current Round: "+e._s(e.currentRound))]),e.timerStarted||e.timerPaused?e._e():r("button",{staticClass:"btn boutane",style:{backgroundColor:e.color},on:{click:function(t){e.timerBtnFct()}}},[e._v(e._s(e.btnText))]),!e.timerStarted&&e.timerPaused?r("button",{staticClass:"btn boutane",style:{backgroundColor:e.color},on:{click:function(t){e.counterOffer()}}},[e._v("Counter")]):e._e(),!e.timerStarted&&e.timerPaused?r("button",{staticClass:"btn boutane",style:{backgroundColor:e.color},on:{click:function(t){e.resetRound()}}},[e._v("Reset")]):e._e(),r("audio",{ref:"audioRef"},[r("source",{attrs:{src:"/sounds/buzzer-team-1.mp3",type:"audio/mpeg"}})])]),r("div",{staticClass:"col-sm-12 col-md-4"},[r("hr"),r("h2",[e._v("Users connected")]),r("hr"),r("h3",[e._v("Team 1")]),e._l(e.users.team1,function(t,o){return r("b-list-group",{key:o},[r("b-list-group-item",{class:{buzzed:t===e.playerBuzzed}},[e._v(e._s(t))])],1)}),r("hr"),r("h3",[e._v("Team 2")]),e._l(e.users.team2,function(t,o){return r("b-list-group",{key:o},[r("b-list-group-item",{class:{buzzed:t===e.playerBuzzed}},[e._v(e._s(t))])],1)})],2)])])},A=[],U={name:"LobbyGM",props:{socket:Object,color:String},data:function(){return{users:{team1:[],team2:[]},timerStarted:!1,timerPaused:!1,currentRound:1,playerBuzzed:"",teamBuzzed:""}},computed:{room:function(){return this.$store.getters.currentRoom},btnText:function(){return this.timerStarted?"Pause":"Start"}},methods:{timerBtnFct:function(){this.timerStarted||(this.socket.emit("gm_roundStart",this.currentRound),this.setTimerData(!0,!1))},setTimerData:function(e,t){this.timerStarted=e,this.timerPaused=t},playSound:function(){this.$refs.audioRef.play()},resetRound:function(){this.socket.emit("gm_roundEnd")},counterOffer:function(){this.socket.emit("gm_offerCounter",this.teamBuzzed),this.teamBuzzed="",this.playerBuzzed=""}},created:function(){var e=this;this.socket&&(this.socket.on("userJoined",function(t){var r=t.username,o=t.team;e.users[o].push(r)}),this.socket.on("userLeft",function(t){var r=t.username,o=t.team,n=k.a.cloneDeep(e.users[o]);k.a.remove(n,function(e){return e===r});e.users[o]=n}),this.socket.on("game_roundEnd",function(){e.currentRound=e.currentRound+=1,e.timerStarted=!1,e.timerPaused=!1,e.playerBuzzed="",e.teamBuzzed=""}),this.socket.on("gm_receiveBuzz",function(t){var r=t.username,o=t.team;e.playerBuzzed=r,e.teamBuzzed=o,e.timerPaused=!0,e.setTimerData(!1,!0),e.playSound()}))}},j=U,$=(r("4e9c"),Object(v["a"])(j,P,A,!1,null,"40628e2d",null));$.options.__file="GameLobby.vue";var L=$.exports,N={name:"app",components:{Login:_,PLobby:M,GMLogin:G,GMLobby:L},data:function(){return{color:"#ffffff",isGameMasterMode:!0,socketRef:null}},computed:{room:function(){return this.$store.getters.currentRoom},toggleText:function(){return this.isGameMasterMode?"Player Mode":"Game Master Mode"}},created:function(){this.color=c()({luminosity:"light"})},methods:{toggleMode:function(){this.isGameMasterMode=!this.isGameMasterMode},setUpRoom:function(e){this.socketRef=e}}},F=N,D=(r("034f"),Object(v["a"])(F,s,i,!1,null,null,null));D.options.__file="App.vue";var J=D.exports;o["a"].use(n["a"]),o["a"].use(a["a"]),o["a"].config.productionTip=!1;var q=new n["a"].Store({state:{currentRoom:void 0},actions:{setCurrentRoom:function(e,t){var r=e.commit;r("SET_ROOM",t)},setUsername:function(e,t){var r=e.commit;r("SET_USERNAME",t)},setTeam:function(e,t){var r=e.commit;r("SET_TEAM",t)}},getters:{currentRoom:function(e){return e.currentRoom},team:function(e){return e.team},username:function(e){return e.username}},mutations:{SET_ROOM:function(e,t){e.currentRoom=t},SET_USERNAME:function(e,t){e.username=t},SET_TEAM:function(e,t){e.team=t}}});new o["a"]({render:function(e){return e(J)},store:q}).$mount("#app")},"73d3":function(e,t,r){"use strict";var o=r("a94d"),n=r.n(o);n.a},8317:function(e,t,r){"use strict";var o=r("b13a"),n=r.n(o);n.a},a6a9:function(e,t,r){},a94d:function(e,t,r){},b13a:function(e,t,r){},c21b:function(e,t,r){},f5a4:function(e,t,r){"use strict";var o=r("a6a9"),n=r.n(o);n.a}});
//# sourceMappingURL=app.dbbd8142.js.map